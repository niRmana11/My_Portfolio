<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Projects</title>
    <link rel="stylesheet" href="/css/projectsStyle.css" />

    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
  </head>
  <body>
    <header>
      <h1>ðŸš€ My Projects</h1>
    </header>

    <main class="projects-container">
      <!-- Project 1 -->
      <div class="project-card">
        <div class="swiper project-swiper all-swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="/assets/projects/budgetbuddy/1.png" alt="Project 1" />
            </div>
            <div class="swiper-slide">
              <img src="/assets/projects/budgetbuddy/2.png" alt="Project 1" />
            </div>
          </div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-pagination"></div>
        </div>
        <div class="project-info">
          <h3>BudgetBuddy â€“ Personal Finance Tracker App</h3>
          <p>
            A simple and intuitive Android app developed in Kotlin that helps
            users track income, expenses, and savings. Built for the Mobile
            Application Development â€“ CA Component 3 assignment.
          </p>
          <button class="read-more-btn" data-project="1">Read More</button>
        </div>
      </div>

      <!-- Project 2 -->
      <div class="project-card">
        <div class="swiper project-swiper all-swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="img3.jpg" alt="Project 2" />
            </div>
            <div class="swiper-slide">
              <img src="img4.jpg" alt="Project 2" />
            </div>
          </div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-pagination"></div>
        </div>
        <div class="project-info">
          <h3>Taskify â€“ Task Management App</h3>
          <p>A simple task management web app...</p>
          <button class="read-more-btn" data-project="2">Read More</button>
        </div>
      </div>
    </main>

    <!-- Popup Modal -->
    <div id="project-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="swiper modal-swiper all-swiper">
          <div class="swiper-wrapper"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-pagination"></div>
        </div>
        <div class="modal-description">
          <h2></h2>
          <p></p>
          <ul></ul>
          <p><strong>Tech Stack:</strong> <span id="modal-tech"></span></p>
        </div>
      </div>
    </div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Custom JS -->
    <script>
      // Initialize project card swipers
      let modalSwipers = [];

      // Initialize all swipers
      document.querySelectorAll(".all-swiper").forEach((swiperEl) => {
        const swiper = new Swiper(swiperEl, {
          loop: true,
          navigation: {
            nextEl: swiperEl.querySelector(".swiper-button-next"),
            prevEl: swiperEl.querySelector(".swiper-button-prev"),
          },
          pagination: {
            el: swiperEl.querySelector(".swiper-pagination"),
            clickable: true,
          },
          autoplay: {
            delay: 3000,
            disableOnInteraction: false,
          },
        });

        modalSwipers.push(swiper);
      });

      // When modal opens â†’ restart autoplay
      document.querySelectorAll(".read-more-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          setTimeout(() => {
            modalSwipers.forEach((swiper) => {
              swiper.update();
              swiper.autoplay.start(); // ðŸ‘ˆ forces autoplay
            });
          }, 200); // short delay lets modal become visible
        });
      });

      // Project Data
      const projectData = {
        1: {
          title: "BudgetBuddy â€“ Personal Finance Tracker App",
          description:
            "A simple and intuitive Android app developed in Kotlin that helps users track income, expenses, and savings. Built for the Mobile Application Development â€“ CA Component 3 assignment.",
          features: [
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
          ],
          tech: "Java Spring Boot, React, Bootstrap, MySQL",
          images: [
            "/assets/projects/budgetbuddy/1.png",
            "/assets/projects/budgetbuddy/2.png",
          ],
        },
        2: {
          title: "BudgetBuddy â€“ Personal Finance Tracker App",
          description:
            "A simple and intuitive Android app developed in Kotlin that helps users track income, expenses, and savings. Built for the Mobile Application Development â€“ CA Component 3 assignment.",
          features: [
            "Providers manage services & time slots",
            "Customers book & edit appointments",
            "Clean responsive UI",
          ],
          tech: "Java Spring Boot, React, Bootstrap, MySQL",
          images: [
            "/assets/projects/budgetbuddy/1.png",
            "/assets/projects/budgetbuddy/2.png",
          ],
        },
      };

      const modal = document.getElementById("project-modal");
      const closeBtn = document.querySelector(".close-btn");
      const readMoreBtns = document.querySelectorAll(".read-more-btn");
      let modalSwiper;

      readMoreBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          const projectId = btn.dataset.project;
          const data = projectData[projectId];

          // Update modal description
          document.querySelector(".modal-description h2").textContent =
            data.title;
          document.querySelector(".modal-description p").textContent =
            data.description;
          document.querySelector(".modal-description ul").innerHTML =
            data.features.map((f) => `<li>${f}</li>`).join("");
          document.getElementById("modal-tech").textContent = data.tech;

          // Update modal swiper images
          const swiperWrapper = document.querySelector(
            ".modal-swiper .swiper-wrapper"
          );
          swiperWrapper.innerHTML = data.images
            .map(
              (img) => `<div class="swiper-slide"><img src="${img}" /></div>`
            )
            .join("");

          // Initialize or update modal swiper
          if (modalSwiper) modalSwiper.destroy();
          modalSwiper = new Swiper(".modal-swiper", {
            loop: true,
            navigation: {
              nextEl: ".modal-swiper .swiper-button-next",
              prevEl: ".modal-swiper .swiper-button-prev",
            },
            pagination: {
              el: ".modal-swiper .swiper-pagination",
              clickable: true,
            },
          });

          modal.style.display = "flex";
        });
      });

      closeBtn.addEventListener("click", () => (modal.style.display = "none"));
      window.addEventListener("click", (e) => {
        if (e.target === modal) modal.style.display = "none";
      });
    </script>
  </body>
</html>
